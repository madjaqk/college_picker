<!DOCTYPE html>
<html>
<head>
	<title>College Finder</title>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>
	<script>
		$(document).ready(function(){
			
			$("#generate").click(function() {
				math = parseInt($("#math_sat").val())
				url = `https://api.data.gov/ed/collegescorecard/v1/schools?fields=school.name,id,2013.admissions.sat_scores.midpoint.math,2013.admissions.sat_scores.midpoint.critical_reading,2013.admissions.sat_scores.midpoint.writing&2013.admissions.sat_scores.midpoint.math__range=..${math}&_per_page=100&api_key=80Iv1QF5ejtA5Hj8GzHCX8i3Lg3ERCAgkeo7lQjq`
				$.get(url, function(res) {
					schools = res["results"];
					schools.sort(function(a, b) {
						var a_sum = a["2013.admissions.sat_scores.midpoint.math"] + a["2013.admissions.sat_scores.midpoint.critical_reading"];
						var b_sum = b["2013.admissions.sat_scores.midpoint.math"] + b["2013.admissions.sat_scores.midpoint.critical_reading"];
						return b_sum - a_sum
					});
					$(".school_list").html("<ol id='schools'>")
					for(var i = 0; i < schools.length; i++){
						output = "<li>"
						output += schools[i]["school.name"]
						output += " -- "
						output += schools[i]["2013.admissions.sat_scores.midpoint.math"] + schools[i]["2013.admissions.sat_scores.midpoint.critical_reading"]
						output += ` (${schools[i]["2013.admissions.sat_scores.midpoint.math"]} math, ${schools[i]["2013.admissions.sat_scores.midpoint.critical_reading"]} reading)`
						output += "</li>"
						$("#schools").append(output)
					}
					$(".school_list").append("</ol>")
				});
			});
		});
	</script>
</head>
<body>
	<div class="input_fields">
		<p>Math SAT score: <input type="text" id="math_sat"></p>
		<button id="generate">Generate list</button>
	</div>
	<div class="school_list">
	</div>
</body>
</html>